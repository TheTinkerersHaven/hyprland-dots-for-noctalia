general {
	# This command runs when loginctl lock-session is requested (e.g., by before_sleep_cmd)
	# Use custom lock screen, fallback to loginctl if it fails
	lock_cmd = qs -c noctalia-shell ipc call lockScreen lock || loginctl lock-session

	# This command runs RIGHT BEFORE the system enters sleep/suspend.
	# Lock the session before suspend
	before_sleep_cmd = loginctl lock-session

	# This command runs RIGHT AFTER the system wakes up.
	# Reactivate the screen after suspend
	after_sleep_cmd = hyprctl dispatch dpms on

	# Makes the system wait until the lock screen app locks the session (best for security)
	# 2 = wait for lock screen confirmation before suspend (best security)
	inhibit_sleep = 2
}

# --- Inactivity Listener: locks screen after 10 minutes of inactivity ---
listener {
    timeout = 600 # 600 seconds = 10 minutes of inactivity
    on-timeout = qs -c noctalia-shell ipc call lockScreen lock || loginctl lock-session
    on-resume = hyprctl dispatch dpms on
}